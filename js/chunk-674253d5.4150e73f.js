(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-674253d5"],{"1dde":function(t,e,a){var c=a("d039"),n=a("b622"),s=a("2d00"),r=n("species");t.exports=function(t){return s>=51||!c((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"6be2":function(t,e,a){"use strict";var c=function(t){return{all:t=t||new Map,on:function(e,a){var c=t.get(e);c?c.push(a):t.set(e,[a])},off:function(e,a){var c=t.get(e);c&&(a?c.splice(c.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var c=t.get(e);c&&c.slice().map((function(t){t(a)})),(c=t.get("*"))&&c.slice().map((function(t){t(e,a)}))}}},n=c();e["a"]=n},8418:function(t,e,a){"use strict";var c=a("a04b"),n=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var r=c(e);r in t?n.f(t,r,s(0,a)):t[r]=a}},"99af":function(t,e,a){"use strict";var c=a("23e7"),n=a("da84"),s=a("d039"),r=a("e8b5"),o=a("861d"),l=a("7b0b"),i=a("07fa"),u=a("8418"),d=a("65f0"),b=a("1dde"),m=a("b622"),f=a("2d00"),g=m("isConcatSpreadable"),j=9007199254740991,O="Maximum allowed index exceeded",p=n.TypeError,h=f>=51||!s((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),v=b("concat"),x=function(t){if(!o(t))return!1;var e=t[g];return void 0!==e?!!e:r(t)},y=!h||!v;c({target:"Array",proto:!0,forced:y},{concat:function(t){var e,a,c,n,s,r=l(this),o=d(r,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(s=-1===e?r:arguments[e],x(s)){if(n=i(s),b+n>j)throw p(O);for(a=0;a<n;a++,b++)a in s&&u(o,b,s[a])}else{if(b>=j)throw p(O);u(o,b++,s)}return o.length=b,o}})},b0c0:function(t,e,a){var c=a("83ab"),n=a("5e77").EXISTS,s=a("e330"),r=a("9bf2").f,o=Function.prototype,l=s(o.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(i.exec),d="name";c&&!n&&r(o,d,{configurable:!0,get:function(){try{return u(i,l(this))[1]}catch(t){return""}}})},cc55:function(t,e,a){"use strict";a.r(e);a("99af"),a("b0c0"),a("b64b");var c=a("7a23"),n={class:"container"},s=Object(c["g"])("h2",{class:"mt-5 text-center"},"購物車",-1),r={class:"text-end"},o=["disabled"],l={class:"spinner-grow spinner-grow-sm"},i=Object(c["i"])(" 清空購物車 "),u={class:"table align-middle"},d=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th"),Object(c["g"])("th",null,"品名"),Object(c["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["g"])("th",null,"單價")])],-1),b=["onClick"],m={key:0,class:"text-success"},f={class:"input-group input-group-sm"},g={class:"input-group mb-3"},j=["onUpdate:modelValue","onChange","disabled"],O=["value"],p={class:"input-group-text",id:"basic-addon2"},h={class:"text-end"},v={key:0,class:"text-success"},x=Object(c["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),y={class:"text-end"},I={key:0},C=Object(c["g"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),k={class:"text-end text-success"},w={class:"my-5 row justify-content-center"},V={class:"mb-3"},L=Object(c["g"])("label",{for:"email",class:"form-label"},"Email",-1),_={class:"mb-3"},D=Object(c["g"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),S={class:"mb-3"},q=Object(c["g"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),E={class:"mb-3"},F=Object(c["g"])("label",{for:"address",class:"form-label"},"收件人地址",-1),U={class:"mb-3"},M=Object(c["g"])("label",{for:"message",class:"form-label"},"留言",-1),J={class:"text-end"},T=["disabled"];function A(t,e,a,A,B,N){var R=Object(c["F"])("Field"),X=Object(c["F"])("ErrorMessage"),$=Object(c["F"])("Form");return Object(c["x"])(),Object(c["f"])("div",n,[s,Object(c["g"])("div",r,[Object(c["g"])("button",{class:"btn btn-outline-danger",type:"button",onClick:e[0]||(e[0]=function(){return N.clearCart&&N.clearCart.apply(N,arguments)}),disabled:0===B.cartData.carts.length},[Object(c["S"])(Object(c["g"])("span",l,null,512),[[c["N"],1===B.isLoadingItem]]),i],8,o)]),Object(c["g"])("table",u,[d,Object(c["g"])("tbody",null,[B.cartData.carts?(Object(c["x"])(!0),Object(c["f"])(c["a"],{key:0},Object(c["E"])(B.cartData.carts,(function(t){return Object(c["x"])(),Object(c["f"])("tr",{key:t.id},[Object(c["g"])("td",null,[Object(c["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return N.removeCartItem(t.id)}}," x ",8,b)]),Object(c["g"])("td",null,[Object(c["i"])(Object(c["I"])(t.product.title)+" ",1),t.coupon?(Object(c["x"])(),Object(c["f"])("div",m," 已套用優惠券 ")):Object(c["e"])("",!0)]),Object(c["g"])("td",null,[Object(c["g"])("div",f,[Object(c["g"])("div",g,[Object(c["S"])(Object(c["g"])("select",{class:"form-select","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return N.updateCartItem(t)},disabled:B.isLoadingItem===t.id},[(Object(c["x"])(),Object(c["f"])(c["a"],null,Object(c["E"])(20,(function(e){return Object(c["g"])("option",{value:e,key:"".concat(e,"-").concat(t.id)},Object(c["I"])(e),9,O)})),64))],40,j),[[c["L"],t.qty]]),Object(c["g"])("span",p,Object(c["I"])(t.product.unit),1)])])]),Object(c["g"])("td",h,[t.final_total!==t.total?(Object(c["x"])(),Object(c["f"])("small",v,"折扣價：")):Object(c["e"])("",!0),Object(c["i"])(" "+Object(c["I"])(t.final_total),1)])])})),128)):Object(c["e"])("",!0)]),Object(c["g"])("tfoot",null,[Object(c["g"])("tr",null,[x,Object(c["g"])("td",y,Object(c["I"])(B.cartData.total),1)]),B.cartData.final_total!==B.cartData.total?(Object(c["x"])(),Object(c["f"])("tr",I,[C,Object(c["g"])("td",k,Object(c["I"])(B.cartData.final_total),1)])):Object(c["e"])("",!0)])]),Object(c["g"])("div",w,[Object(c["j"])($,{ref:"form",class:"col-md-6",onSubmit:N.createOrder},{default:Object(c["R"])((function(t){var a=t.errors;return[Object(c["g"])("div",V,[L,Object(c["j"])(R,{id:"email",name:"email",type:"email",class:Object(c["r"])(["form-control",{"is-invalid":a["email"]}]),modelValue:B.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=function(t){return B.form.user.email=t}),rules:"email|required",placeholder:"請輸入 Email"},null,8,["class","modelValue"]),Object(c["j"])(X,{name:"email",class:"invalid-feedback"})]),Object(c["g"])("div",_,[D,Object(c["j"])(R,{id:"name",name:"姓名",type:"text",class:Object(c["r"])(["form-control",{"is-invalid":a["姓名"]}]),modelValue:B.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return B.form.user.name=t}),rules:"required",placeholder:"請輸入姓名"},null,8,["class","modelValue"]),Object(c["j"])(X,{name:"姓名",class:"invalid-feedback"})]),Object(c["g"])("div",S,[q,Object(c["j"])(R,{id:"tel",name:"電話",type:"text",class:Object(c["r"])(["form-control",{"is-invalid":a["電話"]}]),modelValue:B.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return B.form.user.tel=t}),placeholder:"請輸入電話",rules:"required|min:8"},null,8,["modelValue","class"]),Object(c["j"])(X,{name:"電話",class:"invalid-feedback"})]),Object(c["g"])("div",E,[F,Object(c["j"])(R,{id:"address",name:"地址",type:"text",class:Object(c["r"])(["form-control",{"is-invalid":a["地址"]}]),modelValue:B.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return B.form.user.address=t}),rules:"required",placeholder:"請輸入地址"},null,8,["class","modelValue"]),Object(c["j"])(X,{name:"地址",class:"invalid-feedback"})]),Object(c["g"])("div",U,[M,Object(c["S"])(Object(c["g"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=function(t){return B.form.message=t})},"\n          ",512),[[c["M"],B.form.message]])]),Object(c["g"])("div",J,[Object(c["g"])("button",{type:"submit",class:"btn btn-danger",disabled:0===B.cartData.carts.length||Object.keys(a).length>0}," 送出訂單 ",8,T)])]})),_:1},8,["onSubmit"])])])}var B=a("6be2"),N={data:function(){return{cartData:{carts:[]},products:[],isLoadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var t=this;this.axios.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("megan_api","/cart")).then((function(e){t.cartData=e.data.data})).catch((function(t){alert(t.data.message)}))},clearCart:function(){var t=this;this.isLoadingItem=1,this.axios.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("megan_api","/carts")).then((function(e){t.isLoadingItem=0,alert(e.data.message),t.getCart(),B["a"].emit("get-cart")})).catch((function(t){alert(t.data.message)}))},removeCartItem:function(t){var e=this;this.isLoadingItem=t,this.axios.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("megan_api","/cart/").concat(t)).then((function(t){alert(t.data.message),e.getCart(),e.isLoadingItem="",B["a"].emit("get-cart")})).catch((function(t){alert(t.data.message)}))},updateCartItem:function(t){var e=this,a={product_id:t.id,qty:t.qty};this.isLoadingItem=t.id,this.axios.put("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("megan_api","/cart/").concat(t.id),{data:a}).then((function(t){alert(t.data.message),e.getCart(),e.isLoadingItem=""})).catch((function(t){e.isLoadingItem="",alert(t.data.message)}))},createOrder:function(){var t=this;this.axios.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("megan_api","/order"),{data:this.form}).then((function(e){alert(e.data.message),t.$refs.form.resetForm(),t.form.message="",t.getCart(),B["a"].emit("get-cart")})).catch((function(t){alert(t.data.message)}))}},mounted:function(){this.getCart()}},R=a("6b0d"),X=a.n(R);const $=X()(N,[["render",A]]);e["default"]=$}}]);
//# sourceMappingURL=chunk-674253d5.4150e73f.js.map